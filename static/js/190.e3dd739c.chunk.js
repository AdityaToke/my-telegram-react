"use strict";(self.webpackChunktelegram_react=self.webpackChunktelegram_react||[]).push([[190],{4190:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=n(4165),i=n(5861),s=n(5671),o=n(3144),a=n(136),c=n(4062),l=n(9867),u=n.n(l),d=n(4758),f=n.n(d),p=n(2649),h=n(2391),k=n(8596),m=n(9443),v=n(8707),S=n(7868),w=n(1504),Z=n(8358),g=(n(1611),function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props.animation;return e?u().createElement("div",{className:"sticker-preview"},u().createElement(Z.Z,{type:"preview",stretch:!0,animation:e,style:{borderRadius:0}})):null}}]),n}(u().Component)),E=g,y=n(9294),C=n(7326),P=n(8544),M=n(2320),b=n(7769),R=n(9847),T=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.props.info!==e.info}},{key:"render",value:function(){var e=this.props,t=e.info,n=e.onSelect,r=e.onMouseDown,i=e.onMouseEnter,s=e.onDeleteClick;if(!t)return null;var o=t.title,a=t.stickers.map((function(e,t){return u().createElement("div",{className:"sticker-set-item",key:e.sticker.id,"data-sticker-id":e.sticker.id,onClick:function(){return n(e)},onMouseEnter:i,onMouseDown:r,style:{width:R.EL,height:R.EL}},u().createElement(b.Z,{key:e.sticker.id,sticker:e,autoplay:!1,blur:!1,displaySize:R.EL,preview:!0,source:b.m.PICKER}))}));return u().createElement("div",{className:"sticker-set"},u().createElement("div",{className:"sticker-set-title"},u().createElement("div",{className:"sticker-set-title-wrapper"},u().createElement("span",null,o)),s&&u().createElement(v.Z,{"aria-label":"delete",classes:{root:"sticker-set-icon-root"},size:"small",onClick:s},u().createElement(M.Z,{fontSize:"inherit"}))),u().createElement("div",{className:"sticker-set-content"},a))}}]),n}(u().Component),I=T,D=n(2731),U=n(8197),x=n(5683),N=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).onClientUpdateStickerSetPosition=function(e){var t=e.position;r.setState({position:t})},r.scrollToPosition=function(){var e=r.state.position,t=(0,C.Z)(r),n=t.animator,i=t.anchorRef,s=t.scrollRef.current,o=i.current,a=P.findDOMNode(o),c=s.scrollLeft,l=48*e-147,u=Number(a.style.left.replace("px","")),d=48*e;n&&n.stop(),r.animator=new U.Z(0,[{from:c,to:l,func:function(e){return s.scrollLeft=e}},{from:Math.abs(d-u)>338?d-338*Math.sign(d-u):u,to:d,func:function(e){return a.style.left=e+"px"}}]),setTimeout((function(){r.animator&&r.animator.start()}),0)},r.handleWheel=function(e){var t=(0,C.Z)(r).scrollRef;0===e.deltaX&&(t.current.scrollLeft+=e.deltaY)},r.handleSelect=function(e){var t=r.props,n=t.stickers;(0,t.onSelect)(n.indexOf(e))},r.scrollRef=u().createRef(),r.anchorRef=u().createRef(),r.state={position:0},r}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){x.Z.on("clientUpdateStickerSetPosition",this.onClientUpdateStickerSetPosition)}},{key:"componentWillUnmount",value:function(){x.Z.off("clientUpdateStickerSetPosition",this.onClientUpdateStickerSetPosition)}},{key:"componentDidUpdate",value:function(e,t,n){t.position!==this.state.position&&this.scrollToPosition()}},{key:"render",value:function(){var e=this,t=this.props,n=t.recent,r=t.stickers,i=n?u().createElement("div",{className:"stickers-picker-header-recent",onClick:function(){return e.handleSelect("recent")}},u().createElement(D.Z,null)):null,s=r.map((function(t){return u().createElement(b.Z,{key:t.sticker.id,className:"stickers-picker-header-sticker",sticker:t,play:!1,autoplay:!1,blur:!1,displaySize:36,preview:!0,source:b.m.PICKER_HEADER,openMedia:function(){return e.handleSelect(t)}})}));return u().createElement("div",{className:"stickers-picker-header"},u().createElement("div",{ref:this.scrollRef,className:f()("stickers-picker-header-scroll","scrollbars-hidden"),onWheel:this.handleWheel},u().createElement("div",{className:"stickers-picker-header-items"},i,s),u().createElement("div",{ref:this.anchorRef,className:"stickers-picker-header-anchor"})))}}]),n}(u().Component),A=N,V=n(4615),L=n(717),_=n(3196),O=n(7444),j=n(5135),H=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var o;return(0,s.Z)(this,n),(o=t.call(this,e)).onUpdateInstalledStickerSets=function(e){var t=e.is_masks;e.sticker_set_ids;t&&o.filterSets()},o.onUpdateRecentStickers=function(e){o.reloadRecentContent()},o.scrollTop=function(){o.scrollRef.current.scrollTop=0},o.loadContent=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var s,a,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,j.Z.send({"@type":"getRecentStickers",is_attached:!1});case 3:t=e.sent;case 4:if(i){e.next=13;break}return e.next=7,j.Z.send({"@type":"getInstalledStickerSets",is_masks:!1});case 7:return s=e.sent,a=[],s.sets.forEach((function(e){a.push(j.Z.send({"@type":"getStickerSet",set_id:e.id}))})),e.next=12,Promise.all(a);case 12:i=e.sent;case 13:c=i.slice(0,5),l=i.reduce((function(e,t){return t.stickers.length>0&&e.push(t.stickers[0]),e}),[]),o.setState({recent:t,stickerSets:n,sets:c,fullSets:i,headerStickers:l}),o.setsLength=c.length;case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),o.loadInViewContentOnScroll=function(){o.loadInViewContent()},o.loadInViewContentOnScrollEnd=function(){o.loadInViewContent(400)},o.loadInViewContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=o.scrollRef.current,n=o.state.sets,r=[];n.forEach((function(n){var i=o.itemsMap.get(n.id),s=P.findDOMNode(i);if(s){var a=t.scrollTop-e,c=t.scrollTop+t.offsetHeight+e,l=s.offsetTop,u=s.offsetTop+s.clientHeight;(l>=a&&s.offsetTop<=c||u>=a&&u<=c||l<=a&&u>=c)&&r.push(n)}})),r.forEach((function(e){var t=O.Z.getStore();o.loadedSets.has(e.id)||(o.loadedSets.set(e.id,e.id),(0,L.z4)(t,e))}))},o.updatePosition=function(){var e=o.scrollRef.current,t=o.state,n=t.recent,r=t.sets,i=e.scrollHeight,s=0,a=0;if(n&&n.stickers.length>0){a=1;var c=o.itemsMap.get("recent");if(c){var l=P.findDOMNode(c);if(l&&l.offsetTop<=e.scrollTop){var u=l.offsetTop;if(l&&u<=e.scrollTop){var d=Math.abs(e.scrollTop-u);d<=i&&(i=d,s=0)}}}}r.forEach((function(t,n){var r=o.itemsMap.get(t.id);if(r){var c=P.findDOMNode(r);if(c&&c.offsetTop<=e.scrollTop){var l=c.offsetTop;if(c){var u=Math.abs(e.scrollTop-l);u<=i&&(i=u,s=a+n)}}}})),j.Z.clientUpdate({"@type":"clientUpdateStickerSetPosition",position:s})},o.handleScroll=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,s,a,c,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.scrolling=!0,t=new Date,o.lastScrollTime=t,o.scrollTimer&&clearTimeout(o.scrollTimer),o.scrollTimer=setTimeout((function(){t===o.lastScrollTime&&(o.scrolling=!1)}),250),o.loadInViewContentOnScrollEnd(),o.updatePosition(),n=o.scrollRef.current,!o.loadingChunk){e.next=10;break}return e.abrupt("return");case 10:if(i=!1,n.scrollTop+n.offsetHeight>=n.scrollHeight-400&&(i=!0),i){e.next=14;break}return e.abrupt("return",!1);case 14:if(s=o.state,a=s.sets,(c=s.stickerSets).sets.length!==a.length){e.next=17;break}return e.abrupt("return");case 17:return o.loadingChunk=!0,l=[],c.sets.slice(o.setsLength,o.setsLength+5).forEach((function(e){l.push(j.Z.send({"@type":"getStickerSet",set_id:e.id}))})),e.next=22,Promise.all(l).finally((function(){o.loadingChunk=!1}));case 22:u=e.sent,o.setsLength+=u.length,o.setState({sets:a.concat(u)});case 25:case"end":return e.stop()}}),e)}))),o.loadPreviewContent=function(e){var t=o.state,n=t.recent,r=t.sets,i=(0,_._e)([n].concat(r)).find((function(t){return t.sticker.id===e}));if(i){var s=O.Z.getStore();(0,L.Mc)(s,i,null);(0,_.ix)(i,r,5).forEach((function(e){(0,L.Mc)(s,e,null)}))}},o.handleMouseEnter=function(e){var t=Number(e.currentTarget.dataset.stickerId);if(t&&o.mouseDown){o.mouseDownStickerId!==t&&(o.mouseDownStickerId=null),o.setState({previewStickerId:t}),o.loadPreviewContent(t);var n=o.props.onPreview,r=o.state,i=r.recent,s=r.sets;n((0,_._e)([i].concat(s)).find((function(e){return e.sticker.id===t})))}},o.handleMouseDown=function(e){var t=Number(e.currentTarget.dataset.stickerId);if(t){o.mouseDownStickerId=t;var n=Date.now();return o.setState({previewStickerId:t,timestamp:n,showPreview:!1,cancelSend:!1}),setTimeout((function(){o.state.timestamp===n&&o.setState({showPreview:!0,cancelSend:!0},(function(){var e=o.props.onPreview,n=o.state,r=n.recent,i=n.sets;e((0,_._e)([r].concat(i)).find((function(e){return e.sticker.id===t})))}))}),500),o.loadPreviewContent(t),o.mouseDown=!0,document.addEventListener("mouseup",o.handleMouseUp),e.preventDefault(),e.stopPropagation(),!1}},o.handleMouseUp=function(){o.setState({previewStickerId:0,timestamp:0,showPreview:!1}),(0,o.props.onPreview)(null),o.mouseDown=!1,document.removeEventListener("mouseup",o.handleMouseUp)},o.handleStickerSelect=function(e){var t=o.props.onSelect;o.state.cancelSend||t(e)},o.handleSelectSet=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,s,a,c,l,u,d,f,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.state,i=n.sets,s=n.stickerSets,a=(0,C.Z)(o),c=a.scrollRef,-1!==t){e.next=7;break}c.current.scrollTop=0,e.next=26;break;case 7:if(!(t<i.length)){e.next=12;break}(l=o.itemsMap.get(i[t].id))&&(u=P.findDOMNode(l))&&(c.current.scrollTop=u.offsetTop),e.next=26;break;case 12:if(!(t<s.sets.length)){e.next=26;break}if(!o.loadingChunk){e.next=15;break}return e.abrupt("return");case 15:if(s.sets.length!==i.length){e.next=17;break}return e.abrupt("return");case 17:return o.loadingChunk=!0,d=[],s.sets.slice(o.setsLength,t+1).forEach((function(e){d.push(j.Z.send({"@type":"getStickerSet",set_id:e.id}))})),e.next=22,Promise.all(d).finally((function(){return o.loadingChunk=!1}));case 22:f=e.sent,o.setsLength+=f.length,p=i.concat(f),o.setState({sets:p},(function(){t<p.length&&o.handleSelectSet(t)}));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleDeleteRecent=function(){j.Z.send({"@type":"clearRecentStickers",is_attached:!1})},o.handleDeleteStickerSet=function(e){j.Z.send({"@type":"changeStickerSet",set_id:e,is_installed:!1})},o.scrollRef=u().createRef(),o.itemsMap=new Map,o.loadedSets=new Map,o.state={recent:null,stickerSets:null,sets:[],headerStickers:[],position:0},o.loadInViewContentOnScrollEnd=(0,V.Ds)(o.loadInViewContentOnScrollEnd,100),o.loadInViewContentOnScroll=(0,V.P2)(o.loadInViewContentOnScroll,2e3),o.updatePosition=(0,V.P2)(o.updatePosition,250),o}return(0,o.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){var r=this.state,i=r.position,s=r.recent,o=r.stickerSets,a=r.sets,c=r.showPreview;return t.recent!==s||(t.stickerSets!==o||(t.sets!==a||(t.showPreview!==c||t.position!==i)))}},{key:"componentDidMount",value:function(){x.Z.on("updateInstalledStickerSets",this.onUpdateInstalledStickerSets),x.Z.on("updateRecentStickers",this.onUpdateRecentStickers)}},{key:"componentWillUnmount",value:function(){x.Z.off("updateInstalledStickerSets",this.onUpdateInstalledStickerSets),x.Z.off("updateRecentStickers",this.onUpdateRecentStickers)}},{key:"stop",value:function(){}},{key:"filterSets",value:function(e){var t=this.state;t.sets,t.stickerSets}},{key:"reloadRecentContent",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.send({"@type":"getRecentStickers",is_attached:!1});case 2:t=e.sent,this.setState({recent:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.t,r=t.style,i=this.state,s=i.recent,o=(i.stickerSets,i.sets),a=i.headerStickers;this.itemsMap.clear();var c=o.map((function(t){return u().createElement(I,{key:t.id,ref:function(n){return e.itemsMap.set(t.id,n)},info:t,onSelect:e.handleStickerSelect,onMouseDown:e.handleMouseDown,onMouseEnter:e.handleMouseEnter})})),l=s&&s.stickers.length>0?{stickers:s.stickers,title:n("RecentStickers")}:null;return u().createElement("div",{className:"stickers-picker",style:r},u().createElement(A,{recent:l,stickers:a,onSelect:this.handleSelectSet}),u().createElement("div",{ref:this.scrollRef,className:f()("stickers-picker-scroll","scrollbars-hidden"),onScroll:this.handleScroll},Boolean(l)&&u().createElement(I,{ref:function(t){return e.itemsMap.set("recent",t)},info:l,onSelect:this.handleStickerSelect,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onDeleteClick:this.handleDeleteRecent}),c))}}]),n}(u().Component),B=(0,p.qC)((0,p.dk)(),(0,k.Zh)(),(0,p.eS)())(H),G=n(4412),W=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).handleScroll=function(e){var t=r.scrollRef.current,n=t.scrollTop,i=t.scrollHeight,s=t.offsetHeight;r.loadInViewContentOnScrollEnd();var o=n<=10,a=i-(n+s)<=10,c=Math.abs(n-r.prevScrollTop)>50&&!o&&!a;r.prevScrollTop=n,c||r.loadInViewContent()},r.scrollTop=function(){r.scrollRef.current.scrollTop=0},r.loadInViewContentOnScroll=function(){r.loadInViewContent()},r.loadInViewContentOnScrollEnd=function(){r.loadInViewContent()},r.loadInViewContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=r.scrollRef.current,n=G.Z.savedAnimations;if(n){var i=n.animations,s=new Map,o=[];i.forEach((function(n,i){var a=r.itemsMap.get("".concat(i,"_").concat(n.animation.id)),c=P.findDOMNode(a);if(c){var l=t.scrollTop-e,u=t.scrollTop+t.offsetHeight+e,d=c.offsetTop,f=c.offsetTop+c.clientHeight;(d>=l&&c.offsetTop<=u||f>=l&&f<=u||d<=l&&f>=u)&&(s.set(n,n),o.push(i))}}));var a=G.Z.animationsInView;(0,V.Dw)(a,s)||j.Z.clientUpdate({"@type":"clientUpdateAnimationsInView",animations:s})}},r.handleMouseDown=function(e){var t=Number(e.currentTarget.dataset.animationIndex);r.mouseDownStickerId=t;var n=Date.now();return r.setState({previewStickerId:t,timestamp:n,showPreview:!1,cancelSend:!1}),setTimeout((function(){r.state.timestamp===n&&r.setState({showPreview:!0,cancelSend:!0},(function(){var e=r.props.onPreview,n=r.state;n.recent,n.sets;e(G.Z.savedAnimations.animations[t])}))}),500),r.mouseDown=!0,document.addEventListener("mouseup",r.handleMouseUp),e.preventDefault(),e.stopPropagation(),!1},r.handleMouseEnter=function(e){var t=Number(e.currentTarget.dataset.animationIndex);r.mouseDown&&(r.mouseDownStickerId!==t&&(r.mouseDownStickerId=null),r.setState({previewStickerId:t}),(0,r.props.onPreview)(G.Z.savedAnimations.animations[t]))},r.handleMouseUp=function(){r.setState({previewStickerId:0,timestamp:0,showPreview:!1}),(0,r.props.onPreview)(null),r.mouseDown=!1,document.removeEventListener("mouseup",r.handleMouseUp)},r.openAnimation=function(e){var t=r.props.onSelect;r.state.cancelSend||t(e)},r.scrollRef=u().createRef(),r.itemsMap=new Map,r.loadInViewContentOnScroll=(0,V.P2)(r.loadInViewContentOnScroll,250),r.loadInViewContentOnScrollEnd=(0,V.Ds)(r.loadInViewContentOnScrollEnd,250),r}return(0,o.Z)(n,[{key:"start",value:function(){this.loadInViewContent()}},{key:"stop",value:function(){j.Z.clientUpdate({"@type":"clientUpdateAnimationsInView",animations:new Map})}},{key:"loadContent",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,s=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=G.Z.savedAnimations){e.next=8;break}return e.next=4,j.Z.send({"@type":"getSavedAnimations"});case 4:n=e.sent,G.Z.savedAnimations=n,t=n,this.forceUpdate((function(){s.start()}));case 8:i=O.Z.getStore(),t.animations.slice(0,1e3).forEach((function(e){(0,L.HU)(i,e,null),(0,L.Dg)(i,e,null,!1)}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=(t.t,t.style),r=G.Z.savedAnimations;if(!r)return null;this.itemsMap.clear();var i=r.animations.map((function(t,n){return u().createElement("div",{"data-animation-index":n,key:"".concat(n,"_").concat(t.animation.id),ref:function(r){return e.itemsMap.set("".concat(n,"_").concat(t.animation.id),r)},onMouseDown:e.handleMouseDown,onMouseEnter:e.handleMouseEnter},u().createElement(Z.Z,{type:"picker",animation:t,openMedia:function(){return e.openAnimation(t)},style:{width:104,height:104,margin:2,borderRadius:0}}))}));return u().createElement("div",{className:"gifs-picker",style:n},u().createElement("div",{ref:this.scrollRef,className:f()("gifs-picker-scroll","scrollbars-hidden"),onScroll:this.handleScroll},i))}}]),n}(u().Component),z=(0,p.qC)((0,p.dk)(),(0,k.Zh)(),(0,p.eS)())(W),q=n(9631),F=n(981),X=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var o;return(0,s.Z)(this,n),(o=t.call(this,e)).onClientUpdateChange=function(e){o.state.open?o.removePicker=!0:o.picker=null},o.handleButtonMouseEnter=function(e){o.buttonEnter=!0,setTimeout((function(){if(o.buttonEnter&&(o.updatePicker(!0),o.loadStickerSets(),o.loadSavedAnimations(),2===o.state.tab)){var e=o.gifsPickerRef.current;e&&e.start()}}),R.$g)},o.loadSavedAnimations=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=G.Z.savedAnimations){e.next=7;break}return e.next=4,j.Z.send({"@type":"getSavedAnimations"});case 4:n=e.sent,G.Z.savedAnimations=n,t=n;case 7:i=O.Z.getStore(),t.animations.slice(0,1e3).forEach((function(e){(0,L.HU)(i,e)}));case 10:case"end":return e.stop()}}),e)}))),o.loadStickerSets=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.sets){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,j.Z.send({"@type":"getRecentStickers",is_attached:!1});case 4:return o.recent=e.sent,e.next=7,j.Z.send({"@type":"getInstalledStickerSets",is_masks:!1});case 7:return o.stickerSets=e.sent,t=[],o.stickerSets.sets.forEach((function(e){t.push(j.Z.send({"@type":"getStickerSet",set_id:e.id}))})),e.next=12,Promise.all(t);case 12:o.sets=e.sent,n=o.stickersPickerRef.current,i=O.Z.getStore(),(0,L.Aq)(i,o.recent),o.sets.slice(0,5).reverse().forEach((function(e){(0,L.z4)(i,e),n.loadedSets.set(e.id,e.id)})),o.sets.reduce((function(e,t){return t.stickers.length>0&&e.push(t.stickers[0]),e}),[]).forEach((function(e){(0,L.Ic)(i,e)}));case 20:case"end":return e.stop()}}),e)}))),o.handleButtonMouseLeave=function(){o.buttonEnter=!1,setTimeout((function(){o.tryClosePicker()}),R.$g)},o.tryClosePicker=function(){var e=o.state,t=e.animation,n=e.sticker;o.paperEnter||o.buttonEnter||n||t||o.updatePicker(!1)},o.handlePaperMouseEnter=function(){o.paperEnter=!0},o.handlePaperMouseLeave=function(){o.paperEnter=!1,setTimeout((function(){o.tryClosePicker()}),R.$g)},o.updatePicker=function(e){o.setState({open:e},(function(){if(!o.state.open){o.removePicker&&(o.picker=null,o.removePicker=!1);var e=o.gifsPickerRef.current;e&&e.stop()}}))},o.handleEmojiClick=function(){o.setState({tab:0});var e=o.gifsPickerRef.current;e&&e.stop();var t=o.stickersPickerRef.current;t&&t.stop()},o.handleStickersClick=function(){var e=o.stickersPickerRef.current;1===o.state.tab?e&&e.scrollTop():(setTimeout((function(){e.loadContent(o.recent,o.stickerSets,o.sets)}),150),o.setState({tab:1}));var t=o.gifsPickerRef.current;t&&t.stop()},o.handleGifsClick=function(){var e=o.gifsPickerRef.current;if(2===o.state.tab)e&&e.scrollTop();else{var t=G.Z.savedAnimations;setTimeout((function(){e.loadContent(t),e.start()}),150),o.setState({tab:2})}var n=o.stickersPickerRef.current;n&&n.stop()},o.handleStickerSend=function(e){e&&(j.Z.clientUpdate({"@type":"clientUpdateStickerSend",sticker:e}),o.updatePicker(!1))},o.handleStickerPreview=function(e){o.setState({sticker:e}),j.Z.clientUpdate({"@type":"clientUpdateStickerPreview",sticker:e}),e||o.tryClosePicker()},o.handleGifSend=function(e){e&&(j.Z.clientUpdate({"@type":"clientUpdateAnimationSend",animation:e}),o.updatePicker(!1))},o.handleGifPreview=function(e){o.setState({animation:e}),j.Z.clientUpdate({"@type":"clientUpdateAnimationPreview",animation:e}),e||o.tryClosePicker()},o.state={open:!1,tab:0},o.emojiPickerRef=u().createRef(),o.stickersPickerRef=u().createRef(),o.gifsPickerRef=u().createRef(),o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){q.Z.on("clientUpdateThemeChange",this.onClientUpdateChange),F.Z.on("clientUpdateLanguageChange",this.onClientUpdateChange)}},{key:"componentWillUnmount",value:function(){q.Z.off("clientUpdateThemeChange",this.onClientUpdateChange),F.Z.off("clientUpdateLanguageChange",this.onClientUpdateChange)}},{key:"render",value:function(){var e=this.props,t=e.theme,n=e.t,r=this.state,i=r.open,s=r.tab,o=r.animation,a=r.sticker;if(i&&!this.picker){var c={search:n("Search"),notfound:n("NotEmojiFound"),skintext:n("ChooseDefaultSkinTone"),categories:{search:n("SearchResults"),recent:n("Recent"),people:n("SmileysPeople"),nature:n("AnimalsNature"),foods:n("FoodDrink"),activity:n("Activity"),places:n("TravelPlaces"),objects:n("Objects"),symbols:n("Symbols"),flags:n("Flags"),custom:n("Custom")}};this.picker=u().createElement(w.cW,{ref:this.emojiPickerRef,set:"apple",showPreview:!1,showSkinTones:!1,onSelect:this.props.onSelect,color:t.palette.primary.dark,i18n:c,native:(0,V.ad)(),style:{width:338,overflowX:"hidden",position:"absolute",left:0,top:0}}),this.stickersPicker=u().createElement(B,{ref:this.stickersPickerRef,onSelect:this.handleStickerSend,onPreview:this.handleStickerPreview,style:{position:"absolute",left:338,top:0}}),this.gifsPicker=u().createElement(z,{ref:this.gifsPickerRef,onSelect:this.handleGifSend,onPreview:this.handleGifPreview,style:{width:338,overflowX:"hidden",position:"absolute",left:676,top:0}})}return u().createElement(u().Fragment,null,u().createElement("link",{rel:"stylesheet",type:"text/css",href:"dark"===t.palette.type?"emoji-mart.dark.css":"emoji-mart.light.css"}),u().createElement(v.Z,{className:"inputbox-icon-button","aria-label":"Emoticon",onMouseEnter:this.handleButtonMouseEnter,onMouseLeave:this.handleButtonMouseLeave},u().createElement(S.Z,null)),u().createElement("div",{className:f()("emoji-picker-root",{"emoji-picker-root-opened":i}),onMouseEnter:this.handlePaperMouseEnter,onMouseLeave:this.handlePaperMouseLeave},u().createElement("div",{className:f()("emoji-picker-content",{"emoji-picker-content-stickers":1===s},{"emoji-picker-content-gifs":2===s})},this.picker,this.stickersPicker,this.gifsPicker),u().createElement("div",{className:"emoji-picker-header"},u().createElement(m.Z,{color:0===s?"primary":"default",className:"emoji-picker-header-button",onClick:this.handleEmojiClick},n("Emoji")),u().createElement(m.Z,{color:1===s?"primary":"default",className:"emoji-picker-header-button",onClick:this.handleStickersClick},n("AccDescrStickers")),u().createElement(m.Z,{color:2===s?"primary":"default",className:"emoji-picker-header-button",onClick:this.handleGifsClick},n("AttachGif")))),Boolean(a)&&u().createElement(y.Z,{sticker:a}),Boolean(o)&&u().createElement(E,{animation:o}))}}]),n}(u().Component),$=(0,p.qC)((0,k.Zh)(),h.Z)(X)}}]);
//# sourceMappingURL=190.e3dd739c.chunk.js.map